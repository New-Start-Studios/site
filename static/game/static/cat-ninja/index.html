<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Cat Ninja</title>
	</head>
	<body dir="ltr">
		<script>
			var rootURL = window.location.origin;
			var gameConfig = {
				swfUrl: rootURL + '/game/cat-ninja/cat-ninja.swf'
			};
		</script>
		<div id="waflashContainer">
			<canvas
				class="waflashCanvas"
				style="width: 100%; height: 100vh"
				id="canvas"
				tabindex="1"
			></canvas>
			<div id="waflashStatus" style="width: 100%; height: 100%; display: none">Playing...</div>
			<script>
				var ua = navigator.userAgent.toLowerCase();
				if (
					(navigator.appName == 'Netscape' && ua.indexOf('trident') != -1) ||
					ua.indexOf('msie') != -1
				) {
					var waf = document.getElementById('waflashStatus');
					waf.style.display = 'block';
					waf.innerText = '??? ?????(IE) ??? ??? ???? ???? !\n??, ???? ?? ????? ??????.';
					gtag('event', 'connect_from_ie', { event_category: 'error', event_label: ua });
				}
			</script>
			<script crossorigin="anonymous" type="module">
				let is_mobile = /Mobi/i.test(window.navigator.userAgent);
				if (is_mobile) {
					function scrollToSubject() {
						try {
							window.scrollTo({
								top: 100,
								left: 0,
								behavior: 'smooth'
							});
						} catch (e) {}
					}
					scrollToSubject();
					window.addEventListener('orientationchange', function () {
						setTimeout(scrollToSubject, 100);
					});
				} else {
					document.getElementById('canvas').focus();
				}
				document.getElementById('canvas').addEventListener('keydown', function (ev) {
					ev.preventDefault();
					ev.stopPropagation();
				});
				document.getElementById('canvas').addEventListener('click', function () {
					document.getElementById('canvas').focus();
				});
				document.addEventListener(
					'mousedown',
					(function () {
						const canvasElement = document.getElementById('canvas');
						let focused = false;
						return function (ev) {
							if (ev.target == canvasElement) {
								if (!focused) {
									canvasElement.focus();
									focused = true;
								}
							} else {
								if (focused) {
									focused = false;
								}
							}
							return true;
						};
					})()
				);
				import { createWaflash } from './waflash-player.min.js';
				createWaflash(gameConfig.swfUrl, window.wafOptions || {});
			</script>
		</div>

		<script>
			gadgets.util.runOnLoadHandlers();
		</script>
		<script>
			window.google.csi.tickDl();
		</script>
	</body>
</html>
